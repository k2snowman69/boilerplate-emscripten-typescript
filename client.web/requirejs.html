<html>

<head>
    <script src="./node_modules/requirejs/require.js"></script>
    <script>
        var shared = null;
        require(["./node_modules/client.shared/ship/client.shared"], function (factory) {
            shared = factory.createInstance({
                onRuntimeInitialized: function () {
                    // Remember that the context here is the created module.
                    // Further, this callback is called in the middle of construction, therefore
                    // the variable shared is not ready.
                    var stringFactory = new this.StringFactory();
                    var output = document.getElementById("hi");
                    window.setInterval(function () {
                        output.innerHTML = stringFactory.getString();
                    }, 1000);
                },
                locateFile: function (filename) {
                    if (filename === 'client.shared.js.mem') {
                        return "./node_modules/client.shared/ship/client.shared.js.mem"
                    }
                }
            });
        });
    </script>
</head>

<body>
    <div>This is an example of how to include an emscripten javascript library using requirejs</div>
    <div id="hi">Loading...</div>
</body>

</html>